{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport axios from 'axios';\nimport io from 'socket.io-client';\nimport DocumentViewer from '@/components/DocumentViewer.vue';\nexport default {\n  name: 'RoomView',\n  components: {\n    DocumentViewer\n  },\n  data() {\n    return {\n      roomCode: this.$route.params.roomId,\n      expiresIn: 3600,\n      timerInterval: null,\n      apiUrl: process.env.VUE_APP_API_URL || 'http://localhost:3001',\n      socketUrl: process.env.VUE_APP_SOCKET_URL || 'http://localhost:3001',\n      socket: null,\n      selectedFile: null,\n      isUploading: false,\n      uploadError: '',\n      uploadSuccess: '',\n      files: [],\n      isLoading: false,\n      selectedDocument: null,\n      userId: `user_${Date.now()}_${Math.floor(Math.random() * 1000)}`,\n      // 임시 사용자 ID\n      notification: {\n        show: false,\n        message: '',\n        timeout: null\n      }\n    };\n  },\n  async created() {\n    await this.checkRoomStatus();\n    this.startExpiryTimer();\n    this.loadFiles();\n    this.connectSocket();\n  },\n  beforeDestroy() {\n    if (this.timerInterval) {\n      clearInterval(this.timerInterval);\n    }\n\n    // Socket.IO 연결 해제\n    if (this.socket) {\n      this.socket.disconnect();\n    }\n  },\n  methods: {\n    async checkRoomStatus() {\n      try {\n        const response = await axios.get(`${this.apiUrl}/api/rooms/${this.roomCode}/status`);\n        if (!response.data.active) {\n          this.navigateToHome();\n          alert('방이 만료되었습니다.');\n          return;\n        }\n        this.expiresIn = response.data.expiresIn;\n      } catch (error) {\n        console.error('방 상태 확인 실패:', error);\n        this.navigateToHome();\n      }\n    },\n    navigateToHome() {\n      // 중복 이동 오류 처리\n      this.$router.push('/').catch(err => {\n        if (err.name !== 'NavigationDuplicated') {\n          throw err;\n        }\n      });\n    },\n    startExpiryTimer() {\n      this.timerInterval = setInterval(() => {\n        this.expiresIn--;\n        if (this.expiresIn <= 0) {\n          clearInterval(this.timerInterval);\n          this.navigateToHome();\n          alert('방이 만료되었습니다.');\n        } else if (this.expiresIn % 60 === 0) {\n          // 1분마다 서버에서 실제 만료 시간 확인\n          this.checkRoomStatus();\n        }\n      }, 1000);\n    },\n    formatTime(seconds) {\n      const hours = Math.floor(seconds / 3600);\n      const minutes = Math.floor(seconds % 3600 / 60);\n      const remainingSeconds = seconds % 60;\n      return `${hours}:${String(minutes).padStart(2, '0')}:${String(remainingSeconds).padStart(2, '0')}`;\n    },\n    // 파일 업로드 관련 메서드\n    handleFileChange(event) {\n      this.selectedFile = event.target.files[0] || null;\n      this.uploadError = '';\n      this.uploadSuccess = '';\n    },\n    async uploadFile() {\n      if (!this.selectedFile) {\n        this.uploadError = '업로드할 파일을 선택해주세요.';\n        return;\n      }\n      this.isUploading = true;\n      this.uploadError = '';\n      this.uploadSuccess = '';\n      const formData = new FormData();\n      formData.append('file', this.selectedFile);\n      try {\n        const response = await axios.post(`${this.apiUrl}/api/rooms/${this.roomCode}/files`, formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        this.uploadSuccess = response.data.message || '파일이 성공적으로 업로드되었습니다.';\n        this.selectedFile = null;\n        this.$refs.fileInput.value = '';\n\n        // 파일 목록 새로고침\n        this.loadFiles();\n      } catch (error) {\n        console.error('파일 업로드 오류:', error);\n        this.uploadError = error.response?.data?.message || '파일 업로드에 실패했습니다.';\n      } finally {\n        this.isUploading = false;\n      }\n    },\n    // 파일 목록 관련 메서드\n    async loadFiles() {\n      this.isLoading = true;\n      try {\n        const response = await axios.get(`${this.apiUrl}/api/rooms/${this.roomCode}/files`);\n        this.files = response.data.files || [];\n      } catch (error) {\n        console.error('파일 목록 로드 오류:', error);\n        this.files = [];\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    // 파일 다운로드 메서드\n    downloadFile(file) {\n      // 다운로드 URL 생성\n      const downloadUrl = `${this.apiUrl}/api/rooms/${this.roomCode}/files/${file.filename}?download=true`;\n\n      // 방법 1: 새 창에서 직접 다운로드 링크 열기\n      window.open(downloadUrl, '_blank');\n\n      // 방법 2: a 태그를 사용하여 다운로드\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.target = '_blank';\n      link.download = file.originalName; // 이 속성은 일부 브라우저에서만 작동할 수 있음\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    },\n    // 문서 보기 메서드\n    async viewDocument(file, notifyOthers = true) {\n      this.selectedDocument = file;\n\n      // 다른 사용자에게 파일 열기 이벤트 전파\n      if (notifyOthers && file.isOfficeDocument) {\n        try {\n          await axios.post(`${this.apiUrl}/api/rooms/${this.roomCode}/files/${file.filename}/view`, {\n            userId: this.userId,\n            action: 'join',\n            openFile: true\n          });\n        } catch (error) {\n          console.error('파일 열기 이벤트 전파 오류:', error);\n        }\n      }\n    },\n    // 문서 뷰어 닫기 메서드\n    closeDocumentViewer() {\n      this.selectedDocument = null;\n    },\n    // 알림 표시 메서드\n    showNotification(message, duration = 3000) {\n      // 이전 타이머가 있는 경우 취소\n      if (this.notification.timeout) {\n        clearTimeout(this.notification.timeout);\n      }\n\n      // 알림 표시\n      this.notification.message = message;\n      this.notification.show = true;\n\n      // 일정 시간 후 알림 숨기기\n      this.notification.timeout = setTimeout(() => {\n        this.notification.show = false;\n      }, duration);\n    },\n    // 파일 크기 포맷팅\n    formatFileSize(bytes) {\n      if (bytes === 0) return '0 Bytes';\n      const k = 1024;\n      const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    },\n    // 날짜 포맷팅\n    formatDate(timestamp) {\n      const date = new Date(timestamp);\n      return date.toLocaleString();\n    },\n    // Socket.IO 연결 관련 메서드\n    connectSocket() {\n      // Socket.IO 연결 생성\n      this.socket = io(this.socketUrl);\n\n      // 연결 이벤트\n      this.socket.on('connect', () => {\n        console.log('Socket.IO 연결 성공');\n\n        // 방에 참여\n        this.socket.emit('joinRoom', this.roomCode);\n      });\n\n      // 파일 업로드 이벤트\n      this.socket.on('fileUploaded', data => {\n        console.log('새 파일 업로드 알림 수신:', data);\n\n        // 파일 목록에 새 파일 추가\n        const existingFile = this.files.find(file => file.filename === data.file.filename);\n        if (!existingFile) {\n          this.files.push(data.file);\n        }\n      });\n\n      // 문서 보기 상태 업데이트 이벤트\n      this.socket.on('documentViewUpdate', data => {\n        console.log('문서 보기 상태 업데이트:', data);\n\n        // 파일 목록에서 해당 파일 찾기\n        const fileIndex = this.files.findIndex(file => file.filename === data.filename);\n        if (fileIndex !== -1) {\n          // 보기 상태 업데이트\n          this.files[fileIndex].viewCount = data.viewCount;\n          this.files[fileIndex].currentViewers = data.currentViewers;\n\n          // 현재 선택된 문서인 경우 업데이트\n          if (this.selectedDocument && this.selectedDocument.filename === data.filename) {\n            this.selectedDocument.viewCount = data.viewCount;\n            this.selectedDocument.currentViewers = data.currentViewers;\n          }\n        }\n      });\n\n      // 파일 열기 이벤트\n      this.socket.on('openDocument', data => {\n        console.log('파일 열기 이벤트 수신:', data);\n\n        // 자신이 보낸 이벤트는 무시\n        if (data.userId === this.userId) {\n          return;\n        }\n\n        // 파일 목록에서 해당 파일 찾기\n        const file = this.files.find(file => file.filename === data.filename);\n        if (file) {\n          // 파일 열기\n          this.viewDocument(file);\n\n          // 알림 표시\n          this.$nextTick(() => {\n            this.showNotification(`파일 \"${file.originalName}\"이(가) 열렸습니다.`);\n          });\n        }\n      });\n\n      // 연결 오류 이벤트\n      this.socket.on('connect_error', error => {\n        console.error('Socket.IO 연결 오류:', error);\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","io","DocumentViewer","name","components","data","roomCode","$route","params","roomId","expiresIn","timerInterval","apiUrl","process","env","VUE_APP_API_URL","socketUrl","VUE_APP_SOCKET_URL","socket","selectedFile","isUploading","uploadError","uploadSuccess","files","isLoading","selectedDocument","userId","Date","now","Math","floor","random","notification","show","message","timeout","created","checkRoomStatus","startExpiryTimer","loadFiles","connectSocket","beforeDestroy","clearInterval","disconnect","methods","response","get","active","navigateToHome","alert","error","console","$router","push","catch","err","setInterval","formatTime","seconds","hours","minutes","remainingSeconds","String","padStart","handleFileChange","event","target","uploadFile","formData","FormData","append","post","headers","$refs","fileInput","value","downloadFile","file","downloadUrl","filename","window","open","link","document","createElement","href","download","originalName","body","appendChild","click","removeChild","viewDocument","notifyOthers","isOfficeDocument","action","openFile","closeDocumentViewer","showNotification","duration","clearTimeout","setTimeout","formatFileSize","bytes","k","sizes","i","log","parseFloat","pow","toFixed","formatDate","timestamp","date","toLocaleString","on","emit","existingFile","find","fileIndex","findIndex","viewCount","currentViewers","$nextTick"],"sources":["src/views/RoomView.vue"],"sourcesContent":["<template>\n  <div class=\"room\">\n    <!-- 알림 표시 -->\n    <div v-if=\"notification.show\" class=\"notification\">\n      {{ notification.message }}\n    </div>\n    <div class=\"room-header\">\n      <h2>방 코드: {{ roomCode }}</h2>\n      <div class=\"expiry-timer\" :class=\"{ 'expiry-warning': expiresIn < 600 }\">\n        남은 시간: {{ formatTime(expiresIn) }}\n      </div>\n    </div>\n\n    <div class=\"room-content\" :class=\"{ 'with-document-viewer': selectedDocument }\">\n      <div class=\"left-panel\">\n        <!-- 파일 업로드 영역 -->\n        <div class=\"file-upload-section\">\n          <h3>파일 업로드</h3>\n          <div class=\"upload-form\">\n            <input\n              type=\"file\"\n              ref=\"fileInput\"\n              @change=\"handleFileChange\"\n              class=\"file-input\"\n            />\n            <button\n              @click=\"uploadFile\"\n              :disabled=\"!selectedFile || isUploading\"\n              class=\"upload-button\"\n            >\n              {{ isUploading ? '업로드 중...' : '업로드' }}\n            </button>\n          </div>\n          <div v-if=\"uploadError\" class=\"error-message\">\n            {{ uploadError }}\n          </div>\n          <div v-if=\"uploadSuccess\" class=\"success-message\">\n            {{ uploadSuccess }}\n          </div>\n        </div>\n\n        <!-- 파일 목록 영역 -->\n        <div class=\"file-list-section\">\n          <h3>공유된 파일</h3>\n          <button @click=\"loadFiles\" class=\"refresh-button\">\n            새로고침\n          </button>\n          <div v-if=\"isLoading\" class=\"loading-message\">\n            파일 목록을 불러오는 중...\n          </div>\n          <div v-else-if=\"files.length === 0\" class=\"empty-message\">\n            공유된 파일이 없습니다.\n          </div>\n          <ul v-else class=\"file-list\">\n            <li\n              v-for=\"file in files\"\n              :key=\"file.filename\"\n              class=\"file-item\"\n              :class=\"{ 'is-office-document': file.isOfficeDocument, 'is-selected': selectedDocument && selectedDocument.filename === file.filename }\"\n            >\n              <div class=\"file-info\">\n                <span class=\"file-name\">{{ file.originalName }}</span>\n                <span class=\"file-size\">{{ formatFileSize(file.size) }}</span>\n                <span class=\"file-date\">{{ formatDate(file.uploadedAt) }}</span>\n                <span v-if=\"file.viewCount > 0\" class=\"view-count\">{{ file.viewCount }} 명 보는 중</span>\n              </div>\n              <div class=\"file-actions\">\n                <button\n                  v-if=\"file.isOfficeDocument\"\n                  @click=\"viewDocument(file)\"\n                  class=\"view-button\"\n                >\n                  보기\n                </button>\n                <button @click=\"downloadFile(file)\" class=\"download-button\">\n                  다운로드\n                </button>\n              </div>\n            </li>\n          </ul>\n        </div>\n      </div>\n\n      <!-- 문서 뷰어 영역 -->\n      <div v-if=\"selectedDocument\" class=\"document-viewer-container\">\n        <div class=\"viewer-header\">\n          <h3>문서 보기: {{ selectedDocument.originalName }}</h3>\n          <button @click=\"closeDocumentViewer\" class=\"close-button\">\n            닫기\n          </button>\n        </div>\n        <div class=\"viewer-content\">\n          <DocumentViewer\n            :file=\"selectedDocument\"\n            :room-code=\"roomCode\"\n            :api-url=\"apiUrl\"\n            :socket=\"socket\"\n            :user-id=\"userId\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport io from 'socket.io-client'\nimport DocumentViewer from '@/components/DocumentViewer.vue'\n\nexport default {\n  name: 'RoomView',\n\n  components: {\n    DocumentViewer\n  },\n  data() {\n    return {\n      roomCode: this.$route.params.roomId,\n      expiresIn: 3600,\n      timerInterval: null,\n      apiUrl: process.env.VUE_APP_API_URL || 'http://localhost:3001',\n      socketUrl: process.env.VUE_APP_SOCKET_URL || 'http://localhost:3001',\n      socket: null,\n      selectedFile: null,\n      isUploading: false,\n      uploadError: '',\n      uploadSuccess: '',\n      files: [],\n      isLoading: false,\n      selectedDocument: null,\n      userId: `user_${Date.now()}_${Math.floor(Math.random() * 1000)}`, // 임시 사용자 ID\n      notification: {\n        show: false,\n        message: '',\n        timeout: null\n      }\n    }\n  },\n  async created() {\n    await this.checkRoomStatus()\n    this.startExpiryTimer()\n    this.loadFiles()\n    this.connectSocket()\n  },\n  beforeDestroy() {\n    if (this.timerInterval) {\n      clearInterval(this.timerInterval)\n    }\n\n    // Socket.IO 연결 해제\n    if (this.socket) {\n      this.socket.disconnect()\n    }\n  },\n  methods: {\n    async checkRoomStatus() {\n      try {\n        const response = await axios.get(`${this.apiUrl}/api/rooms/${this.roomCode}/status`)\n        if (!response.data.active) {\n          this.navigateToHome()\n          alert('방이 만료되었습니다.')\n          return\n        }\n        this.expiresIn = response.data.expiresIn\n      } catch (error) {\n        console.error('방 상태 확인 실패:', error)\n        this.navigateToHome()\n      }\n    },\n    navigateToHome() {\n      // 중복 이동 오류 처리\n      this.$router.push('/').catch(err => {\n        if (err.name !== 'NavigationDuplicated') {\n          throw err\n        }\n      })\n    },\n    startExpiryTimer() {\n      this.timerInterval = setInterval(() => {\n        this.expiresIn--\n        if (this.expiresIn <= 0) {\n          clearInterval(this.timerInterval)\n          this.navigateToHome()\n          alert('방이 만료되었습니다.')\n        } else if (this.expiresIn % 60 === 0) {\n          // 1분마다 서버에서 실제 만료 시간 확인\n          this.checkRoomStatus()\n        }\n      }, 1000)\n    },\n    formatTime(seconds) {\n      const hours = Math.floor(seconds / 3600)\n      const minutes = Math.floor((seconds % 3600) / 60)\n      const remainingSeconds = seconds % 60\n\n      return `${hours}:${String(minutes).padStart(2, '0')}:${String(remainingSeconds).padStart(2, '0')}`\n    },\n\n    // 파일 업로드 관련 메서드\n    handleFileChange(event) {\n      this.selectedFile = event.target.files[0] || null\n      this.uploadError = ''\n      this.uploadSuccess = ''\n    },\n\n    async uploadFile() {\n      if (!this.selectedFile) {\n        this.uploadError = '업로드할 파일을 선택해주세요.'\n        return\n      }\n\n      this.isUploading = true\n      this.uploadError = ''\n      this.uploadSuccess = ''\n\n      const formData = new FormData()\n      formData.append('file', this.selectedFile)\n\n      try {\n        const response = await axios.post(\n          `${this.apiUrl}/api/rooms/${this.roomCode}/files`,\n          formData,\n          {\n            headers: {\n              'Content-Type': 'multipart/form-data'\n            }\n          }\n        )\n\n        this.uploadSuccess = response.data.message || '파일이 성공적으로 업로드되었습니다.'\n        this.selectedFile = null\n        this.$refs.fileInput.value = ''\n\n        // 파일 목록 새로고침\n        this.loadFiles()\n      } catch (error) {\n        console.error('파일 업로드 오류:', error)\n        this.uploadError = error.response?.data?.message || '파일 업로드에 실패했습니다.'\n      } finally {\n        this.isUploading = false\n      }\n    },\n\n    // 파일 목록 관련 메서드\n    async loadFiles() {\n      this.isLoading = true\n\n      try {\n        const response = await axios.get(`${this.apiUrl}/api/rooms/${this.roomCode}/files`)\n        this.files = response.data.files || []\n      } catch (error) {\n        console.error('파일 목록 로드 오류:', error)\n        this.files = []\n      } finally {\n        this.isLoading = false\n      }\n    },\n\n    // 파일 다운로드 메서드\n    downloadFile(file) {\n      // 다운로드 URL 생성\n      const downloadUrl = `${this.apiUrl}/api/rooms/${this.roomCode}/files/${file.filename}?download=true`\n\n      // 방법 1: 새 창에서 직접 다운로드 링크 열기\n      window.open(downloadUrl, '_blank')\n\n      // 방법 2: a 태그를 사용하여 다운로드\n      const link = document.createElement('a')\n      link.href = downloadUrl\n      link.target = '_blank'\n      link.download = file.originalName // 이 속성은 일부 브라우저에서만 작동할 수 있음\n      document.body.appendChild(link)\n      link.click()\n      document.body.removeChild(link)\n    },\n\n    // 문서 보기 메서드\n    async viewDocument(file, notifyOthers = true) {\n      this.selectedDocument = file\n\n      // 다른 사용자에게 파일 열기 이벤트 전파\n      if (notifyOthers && file.isOfficeDocument) {\n        try {\n          await axios.post(`${this.apiUrl}/api/rooms/${this.roomCode}/files/${file.filename}/view`, {\n            userId: this.userId,\n            action: 'join',\n            openFile: true\n          })\n        } catch (error) {\n          console.error('파일 열기 이벤트 전파 오류:', error)\n        }\n      }\n    },\n\n    // 문서 뷰어 닫기 메서드\n    closeDocumentViewer() {\n      this.selectedDocument = null\n    },\n\n    // 알림 표시 메서드\n    showNotification(message, duration = 3000) {\n      // 이전 타이머가 있는 경우 취소\n      if (this.notification.timeout) {\n        clearTimeout(this.notification.timeout)\n      }\n\n      // 알림 표시\n      this.notification.message = message\n      this.notification.show = true\n\n      // 일정 시간 후 알림 숨기기\n      this.notification.timeout = setTimeout(() => {\n        this.notification.show = false\n      }, duration)\n    },\n\n    // 파일 크기 포맷팅\n    formatFileSize(bytes) {\n      if (bytes === 0) return '0 Bytes'\n\n      const k = 1024\n      const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB']\n      const i = Math.floor(Math.log(bytes) / Math.log(k))\n\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n    },\n\n    // 날짜 포맷팅\n    formatDate(timestamp) {\n      const date = new Date(timestamp)\n      return date.toLocaleString()\n    },\n\n    // Socket.IO 연결 관련 메서드\n    connectSocket() {\n      // Socket.IO 연결 생성\n      this.socket = io(this.socketUrl)\n\n      // 연결 이벤트\n      this.socket.on('connect', () => {\n        console.log('Socket.IO 연결 성공')\n\n        // 방에 참여\n        this.socket.emit('joinRoom', this.roomCode)\n      })\n\n      // 파일 업로드 이벤트\n      this.socket.on('fileUploaded', (data) => {\n        console.log('새 파일 업로드 알림 수신:', data)\n\n        // 파일 목록에 새 파일 추가\n        const existingFile = this.files.find(file => file.filename === data.file.filename)\n        if (!existingFile) {\n          this.files.push(data.file)\n        }\n      })\n\n      // 문서 보기 상태 업데이트 이벤트\n      this.socket.on('documentViewUpdate', (data) => {\n        console.log('문서 보기 상태 업데이트:', data)\n\n        // 파일 목록에서 해당 파일 찾기\n        const fileIndex = this.files.findIndex(file => file.filename === data.filename)\n        if (fileIndex !== -1) {\n          // 보기 상태 업데이트\n          this.files[fileIndex].viewCount = data.viewCount\n          this.files[fileIndex].currentViewers = data.currentViewers\n\n          // 현재 선택된 문서인 경우 업데이트\n          if (this.selectedDocument && this.selectedDocument.filename === data.filename) {\n            this.selectedDocument.viewCount = data.viewCount\n            this.selectedDocument.currentViewers = data.currentViewers\n          }\n        }\n      })\n\n      // 파일 열기 이벤트\n      this.socket.on('openDocument', (data) => {\n        console.log('파일 열기 이벤트 수신:', data)\n\n        // 자신이 보낸 이벤트는 무시\n        if (data.userId === this.userId) {\n          return\n        }\n\n        // 파일 목록에서 해당 파일 찾기\n        const file = this.files.find(file => file.filename === data.filename)\n        if (file) {\n          // 파일 열기\n          this.viewDocument(file)\n\n          // 알림 표시\n          this.$nextTick(() => {\n            this.showNotification(`파일 \"${file.originalName}\"이(가) 열렸습니다.`)\n          })\n        }\n      })\n\n      // 연결 오류 이벤트\n      this.socket.on('connect_error', (error) => {\n        console.error('Socket.IO 연결 오류:', error)\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.room {\n  padding: 20px;\n}\n\n.room-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px 20px;\n  background-color: #f5f5f5;\n  margin-bottom: 20px;\n  border-radius: 8px;\n}\n\n.expiry-timer {\n  font-family: monospace;\n  padding: 5px 10px;\n  border-radius: 4px;\n  background-color: #e0e0e0;\n}\n\n.expiry-warning {\n  background-color: #ffebee;\n  color: #c62828;\n  animation: pulse 2s infinite;\n}\n\n.room-content {\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: 20px;\n  transition: all 0.3s ease;\n}\n\n.room-content.with-document-viewer {\n  grid-template-columns: 1fr 2fr;\n}\n\n.left-panel {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.file-upload-section,\n.file-list-section {\n  background-color: #f9f9f9;\n  padding: 20px;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.upload-form {\n  display: flex;\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n\n.file-input {\n  flex: 1;\n  padding: 8px;\n  border: 1px solid #ddd;\n  border-radius: 4px 0 0 4px;\n}\n\n.upload-button {\n  padding: 8px 16px;\n  background-color: #4caf50;\n  color: white;\n  border: none;\n  border-radius: 0 4px 4px 0;\n  cursor: pointer;\n}\n\n.upload-button:disabled {\n  background-color: #cccccc;\n  cursor: not-allowed;\n}\n\n.error-message {\n  color: #f44336;\n  margin-top: 10px;\n}\n\n.success-message {\n  color: #4caf50;\n  margin-top: 10px;\n}\n\n.refresh-button {\n  padding: 5px 10px;\n  background-color: #2196f3;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  margin-left: 10px;\n}\n\n.loading-message,\n.empty-message {\n  margin-top: 10px;\n  color: #757575;\n  font-style: italic;\n}\n\n.file-list {\n  list-style: none;\n  padding: 0;\n  margin-top: 15px;\n}\n\n.file-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px;\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  margin-bottom: 8px;\n  background-color: white;\n  transition: background-color 0.2s ease;\n}\n\n.file-item.is-office-document {\n  border-left: 4px solid #2196f3;\n}\n\n.file-item.is-selected {\n  background-color: #e3f2fd;\n}\n\n.file-info {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n}\n\n.file-name {\n  font-weight: bold;\n  margin-bottom: 5px;\n}\n\n.file-size,\n.file-date {\n  font-size: 0.8em;\n  color: #757575;\n}\n\n.view-count {\n  font-size: 0.8em;\n  color: #2196f3;\n  background-color: #e3f2fd;\n  padding: 2px 6px;\n  border-radius: 10px;\n  display: inline-block;\n  margin-top: 5px;\n}\n\n.file-actions {\n  display: flex;\n  gap: 8px;\n}\n\n.download-button {\n  padding: 5px 10px;\n  background-color: #2196f3;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.view-button {\n  padding: 5px 10px;\n  background-color: #4caf50;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.document-viewer-container {\n  background-color: #f9f9f9;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  display: flex;\n  flex-direction: column;\n  height: 600px;\n}\n\n.viewer-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px 15px;\n  background-color: #f5f5f5;\n  border-bottom: 1px solid #e0e0e0;\n  border-radius: 8px 8px 0 0;\n}\n\n.viewer-header h3 {\n  margin: 0;\n  font-size: 16px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.close-button {\n  padding: 5px 10px;\n  background-color: #f44336;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.viewer-content {\n  flex: 1;\n  overflow: hidden;\n  position: relative;\n}\n\n@keyframes pulse {\n  0% { opacity: 1; }\n  50% { opacity: 0.5; }\n  100% { opacity: 1; }\n}\n\n@media (max-width: 992px) {\n  .room-content.with-document-viewer {\n    grid-template-columns: 1fr;\n  }\n\n  .document-viewer-container {\n    height: 500px;\n    order: -1;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}