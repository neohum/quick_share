{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport axios from 'axios';\nimport io from 'socket.io-client';\nimport DocumentViewer from '@/components/DocumentViewer.vue';\n\n// UUID ÏÉùÏÑ± Ìï®Ïàò\nfunction generateUUID() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = Math.random() * 16 | 0;\n    const v = c === 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}\nexport default {\n  name: 'RoomView',\n  components: {\n    DocumentViewer\n  },\n  data() {\n    return {\n      roomCode: this.$route.params.roomId,\n      expiresIn: 3600,\n      timerInterval: null,\n      apiUrl: process.env.VUE_APP_API_URL || 'http://localhost:3001',\n      socketUrl: process.env.VUE_APP_SOCKET_URL || 'http://localhost:3001',\n      socket: null,\n      selectedFile: null,\n      isUploading: false,\n      uploadError: '',\n      uploadSuccess: '',\n      files: [],\n      isLoading: false,\n      selectedDocument: null,\n      userId: `user_${Date.now()}_${Math.floor(Math.random() * 1000)}`,\n      // ÏûÑÏãú ÏÇ¨Ïö©Ïûê ID\n      notification: {\n        show: false,\n        message: '',\n        timeout: null\n      }\n    };\n  },\n  async created() {\n    await this.checkRoomStatus();\n    this.startExpiryTimer();\n    this.loadFiles();\n    this.connectSocket();\n  },\n  beforeDestroy() {\n    if (this.timerInterval) {\n      clearInterval(this.timerInterval);\n    }\n\n    // Socket.IO Ïó∞Í≤∞ Ìï¥Ï†ú\n    if (this.socket) {\n      this.socket.disconnect();\n    }\n  },\n  methods: {\n    async checkRoomStatus() {\n      try {\n        const response = await axios.get(`${this.apiUrl}/api/rooms/${this.roomCode}/status`);\n        if (!response.data.active) {\n          this.navigateToHome();\n          alert('Î∞©Ïù¥ ÎßåÎ£åÎêòÏóàÏäµÎãàÎã§.');\n          return;\n        }\n        this.expiresIn = response.data.expiresIn;\n      } catch (error) {\n        console.error('Î∞© ÏÉÅÌÉú ÌôïÏù∏ Ïã§Ìå®:', error);\n        this.navigateToHome();\n      }\n    },\n    navigateToHome() {\n      // Ï§ëÎ≥µ Ïù¥Îèô Ïò§Î•ò Ï≤òÎ¶¨\n      this.$router.push('/').catch(err => {\n        if (err.name !== 'NavigationDuplicated') {\n          throw err;\n        }\n      });\n    },\n    startExpiryTimer() {\n      this.timerInterval = setInterval(() => {\n        this.expiresIn--;\n        if (this.expiresIn <= 0) {\n          clearInterval(this.timerInterval);\n          this.navigateToHome();\n          alert('Î∞©Ïù¥ ÎßåÎ£åÎêòÏóàÏäµÎãàÎã§.');\n        } else if (this.expiresIn % 60 === 0) {\n          // 1Î∂ÑÎßàÎã§ ÏÑúÎ≤ÑÏóêÏÑú Ïã§Ï†ú ÎßåÎ£å ÏãúÍ∞Ñ ÌôïÏù∏\n          this.checkRoomStatus();\n        }\n      }, 1000);\n    },\n    formatTime(seconds) {\n      const hours = Math.floor(seconds / 3600);\n      const minutes = Math.floor(seconds % 3600 / 60);\n      const remainingSeconds = seconds % 60;\n      return `${hours}:${String(minutes).padStart(2, '0')}:${String(remainingSeconds).padStart(2, '0')}`;\n    },\n    // ÌååÏùº ÏóÖÎ°úÎìú Í¥ÄÎ†® Î©îÏÑúÎìú\n    handleFileChange(event) {\n      this.selectedFile = event.target.files[0] || null;\n      this.uploadError = '';\n      this.uploadSuccess = '';\n    },\n    async uploadFile() {\n      if (!this.selectedFile) {\n        this.uploadError = 'ÏóÖÎ°úÎìúÌï† ÌååÏùºÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.';\n        return;\n      }\n      this.isUploading = true;\n      this.uploadError = '';\n      this.uploadSuccess = '';\n      const formData = new FormData();\n      formData.append('file', this.selectedFile);\n      try {\n        const response = await axios.post(`${this.apiUrl}/api/rooms/${this.roomCode}/files`, formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        this.uploadSuccess = response.data.message || 'ÌååÏùºÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏóÖÎ°úÎìúÎêòÏóàÏäµÎãàÎã§.';\n        this.selectedFile = null;\n        this.$refs.fileInput.value = '';\n\n        // ÌååÏùº Î™©Î°ù ÏÉàÎ°úÍ≥†Ïπ®\n        this.loadFiles();\n      } catch (error) {\n        console.error('ÌååÏùº ÏóÖÎ°úÎìú Ïò§Î•ò:', error);\n        this.uploadError = error.response?.data?.message || 'ÌååÏùº ÏóÖÎ°úÎìúÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.';\n      } finally {\n        this.isUploading = false;\n      }\n    },\n    // ÌååÏùº Î™©Î°ù Í¥ÄÎ†® Î©îÏÑúÎìú\n    async loadFiles() {\n      this.isLoading = true;\n      try {\n        const response = await axios.get(`${this.apiUrl}/api/rooms/${this.roomCode}/files`);\n        const files = response.data.files || [];\n\n        // Ï§ëÎ≥µ ÌååÏùº Ï†úÍ±∞ Î∞è Í≥†Ïú† ID Ìï†Îãπ\n        const filenameMap = new Map();\n\n        // ÌååÏùºÎ™ÖÏúºÎ°ú Ï§ëÎ≥µ Ï†úÍ±∞\n        files.forEach(file => {\n          // Ïù¥ÎØ∏ ÎèôÏùºÌïú ÌååÏùºÎ™ÖÏù¥ ÏûàÎäî Í≤ΩÏö∞ Í∞ÄÏû• ÏµúÍ∑º ÌååÏùºÎ°ú ÎåÄÏ≤¥\n          if (!filenameMap.has(file.filename) || file.uploadedAt > filenameMap.get(file.filename).uploadedAt) {\n            filenameMap.set(file.filename, file);\n          }\n        });\n\n        // Ï§ëÎ≥µÏù¥ Ï†úÍ±∞Îêú ÌååÏùº Î™©Î°ù Í∞ÄÏ†∏Ïò§Í∏∞\n        const uniqueFiles = Array.from(filenameMap.values());\n\n        // Í∞Å ÌååÏùºÏóê Í≥†Ïú† ID Ìï†Îãπ (Ïù¥ÎØ∏ ÏûàÎäî Í≤ΩÏö∞ Ïú†ÏßÄ)\n        this.files = uniqueFiles.map(file => ({\n          ...file,\n          _uniqueKey: generateUUID() // Î†åÎçîÎßÅÏö© Í≥†Ïú† ÌÇ§\n        }));\n      } catch (error) {\n        console.error('ÌååÏùº Î™©Î°ù Î°úÎìú Ïò§Î•ò:', error);\n        this.files = [];\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    // ÌååÏùº Îã§Ïö¥Î°úÎìú Î©îÏÑúÎìú\n    async downloadFile(file) {\n      try {\n        // Îã§Ïö¥Î°úÎìú URL ÏÉùÏÑ± (ID ÏÇ¨Ïö©)\n        const downloadUrl = `${this.apiUrl}/api/rooms/${this.roomCode}/files/download/${file.id}?download=true`;\n\n        // axiosÎ•º ÏÇ¨Ïö©ÌïòÏó¨ ÌååÏùº Îã§Ïö¥Î°úÎìú\n        const response = await axios({\n          url: downloadUrl,\n          method: 'GET',\n          responseType: 'blob'\n        });\n\n        // Blob ÏÉùÏÑ±\n        const blob = new Blob([response.data], {\n          type: file.mimetype\n        });\n\n        // Îã§Ïö¥Î°úÎìú ÎßÅÌÅ¨ ÏÉùÏÑ±\n        const url = window.URL.createObjectURL(blob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.setAttribute('download', file.originalName);\n        document.body.appendChild(link);\n\n        // Îã§Ïö¥Î°úÎìú ÏãúÏûë\n        link.click();\n\n        // ÎßÅÌÅ¨ Ï†úÍ±∞\n        window.URL.revokeObjectURL(url);\n        document.body.removeChild(link);\n      } catch (error) {\n        console.error('ÌååÏùº Îã§Ïö¥Î°úÎìú Ïò§Î•ò:', error);\n        this.showNotification('ÌååÏùº Îã§Ïö¥Î°úÎìúÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');\n      }\n    },\n    // Î¨∏ÏÑú Î≥¥Í∏∞ Î©îÏÑúÎìú\n    async viewDocument(file, notifyOthers = true) {\n      this.selectedDocument = file;\n\n      // Îã§Î•∏ ÏÇ¨Ïö©ÏûêÏóêÍ≤å ÌååÏùº Ïó¥Í∏∞ Ïù¥Î≤§Ìä∏ Ï†ÑÌåå\n      if (notifyOthers && file.isOfficeDocument) {\n        try {\n          await axios.post(`${this.apiUrl}/api/rooms/${this.roomCode}/files/${file.id}/view`, {\n            userId: this.userId,\n            action: 'join',\n            openFile: true\n          });\n        } catch (error) {\n          console.error('ÌååÏùº Ïó¥Í∏∞ Ïù¥Î≤§Ìä∏ Ï†ÑÌåå Ïò§Î•ò:', error);\n        }\n      }\n    },\n    // Î¨∏ÏÑú Î∑∞Ïñ¥ Îã´Í∏∞ Î©îÏÑúÎìú\n    closeDocumentViewer() {\n      this.selectedDocument = null;\n    },\n    // ÏïåÎ¶º ÌëúÏãú Î©îÏÑúÎìú\n    showNotification(message, duration = 3000) {\n      // Ïù¥Ï†Ñ ÌÉÄÏù¥Î®∏Í∞Ä ÏûàÎäî Í≤ΩÏö∞ Ï∑®ÏÜå\n      if (this.notification.timeout) {\n        clearTimeout(this.notification.timeout);\n      }\n\n      // ÏïåÎ¶º ÌëúÏãú\n      this.notification.message = message;\n      this.notification.show = true;\n\n      // ÏùºÏ†ï ÏãúÍ∞Ñ ÌõÑ ÏïåÎ¶º Ïà®Í∏∞Í∏∞\n      this.notification.timeout = setTimeout(() => {\n        this.notification.show = false;\n      }, duration);\n    },\n    // ÌååÏùº ÌÅ¨Í∏∞ Ìè¨Îß∑ÌåÖ\n    formatFileSize(bytes) {\n      if (bytes === 0) return '0 Bytes';\n      const k = 1024;\n      const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    },\n    // ÎÇ†Ïßú Ìè¨Îß∑ÌåÖ\n    formatDate(timestamp) {\n      const date = new Date(timestamp);\n      return date.toLocaleString();\n    },\n    // Socket.IO Ïó∞Í≤∞ Í¥ÄÎ†® Î©îÏÑúÎìú\n    connectSocket() {\n      // Socket.IO Ïó∞Í≤∞ ÏÉùÏÑ±\n      this.socket = io(this.socketUrl);\n\n      // Ïó∞Í≤∞ Ïù¥Î≤§Ìä∏\n      this.socket.on('connect', () => {\n        console.log('Socket.IO Ïó∞Í≤∞ ÏÑ±Í≥µ');\n\n        // Î∞©Ïóê Ï∞∏Ïó¨\n        this.socket.emit('joinRoom', this.roomCode);\n      });\n\n      // ÌååÏùº ÏóÖÎ°úÎìú Ïù¥Î≤§Ìä∏\n      this.socket.on('fileUploaded', data => {\n        console.log('ÏÉà ÌååÏùº ÏóÖÎ°úÎìú ÏïåÎ¶º ÏàòÏã†:', data);\n\n        // ÌååÏùºÏóê Í≥†Ïú† ÌÇ§ Ï∂îÍ∞Ä\n        const newFile = {\n          ...data.file,\n          _uniqueKey: generateUUID()\n        };\n\n        // ÌååÏùº Î™©Î°ùÏóê ÏÉà ÌååÏùº Ï∂îÍ∞Ä (Ï§ëÎ≥µ Î∞©ÏßÄ)\n        const existingFileIndex = this.files.findIndex(file => file.filename === newFile.filename);\n        if (existingFileIndex !== -1) {\n          // Í∏∞Ï°¥ ÌååÏùºÏùò Í≥†Ïú† ÌÇ§ Ïú†ÏßÄ\n          newFile._uniqueKey = this.files[existingFileIndex]._uniqueKey;\n          // Í∏∞Ï°¥ ÌååÏùº ÏóÖÎç∞Ïù¥Ìä∏\n          this.files.splice(existingFileIndex, 1, newFile);\n        } else {\n          // ÏÉà ÌååÏùº Ï∂îÍ∞Ä\n          this.files.push(newFile);\n        }\n\n        // ÌååÏùº Î™©Î°ù Ï†ïÎ†¨ (ÏµúÏã† ÏóÖÎ°úÎìú Ïàú)\n        this.files.sort((a, b) => b.uploadedAt - a.uploadedAt);\n      });\n\n      // Î¨∏ÏÑú Î≥¥Í∏∞ ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏ Ïù¥Î≤§Ìä∏\n      this.socket.on('documentViewUpdate', data => {\n        console.log('Î¨∏ÏÑú Î≥¥Í∏∞ ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏:', data);\n\n        // ÌååÏùº Î™©Î°ùÏóêÏÑú Ìï¥Îãπ ÌååÏùº Ï∞æÍ∏∞ (ID ÏÇ¨Ïö©)\n        const fileIndex = this.files.findIndex(file => file.id && file.id === data.id || file.filename === data.filename);\n        if (fileIndex !== -1) {\n          // Î≥¥Í∏∞ ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏\n          this.files[fileIndex].viewCount = data.viewCount;\n          this.files[fileIndex].currentViewers = data.currentViewers;\n\n          // ÌòÑÏû¨ ÏÑ†ÌÉùÎêú Î¨∏ÏÑúÏù∏ Í≤ΩÏö∞ ÏóÖÎç∞Ïù¥Ìä∏\n          if (this.selectedDocument && (this.selectedDocument.id && this.selectedDocument.id === data.id || this.selectedDocument.filename === data.filename)) {\n            this.selectedDocument.viewCount = data.viewCount;\n            this.selectedDocument.currentViewers = data.currentViewers;\n          }\n        }\n      });\n\n      // ÌååÏùº Ïó¥Í∏∞ Ïù¥Î≤§Ìä∏\n      this.socket.on('openDocument', data => {\n        console.log('ÌååÏùº Ïó¥Í∏∞ Ïù¥Î≤§Ìä∏ ÏàòÏã†:', data);\n\n        // ÏûêÏã†Ïù¥ Î≥¥ÎÇ∏ Ïù¥Î≤§Ìä∏Îäî Î¨¥Ïãú\n        if (data.userId === this.userId) {\n          return;\n        }\n\n        // ÌååÏùº Î™©Î°ùÏóêÏÑú Ìï¥Îãπ ÌååÏùº Ï∞æÍ∏∞ (ID ÏÇ¨Ïö©)\n        const fileIndex = this.files.findIndex(file => file.id && file.id === data.id || file.filename === data.filename);\n        if (fileIndex !== -1) {\n          // ÌååÏùº Ïó¥Í∏∞ (Îã§Î•∏ ÏÇ¨Ïö©ÏûêÏóêÍ≤å ÏïåÎ¶¨ÏßÄ ÏïäÏùå)\n          this.viewDocument(this.files[fileIndex], false);\n\n          // ÏïåÎ¶º ÌëúÏãú\n          this.$nextTick(() => {\n            this.showNotification(`ÌååÏùº \"${this.files[fileIndex].originalName}\"Ïù¥(Í∞Ä) Ïó¥Î†∏ÏäµÎãàÎã§.`);\n          });\n        } else if (data.originalName) {\n          // ÌååÏùº Î™©Î°ùÏùÑ Îã§Ïãú Î∂àÎü¨ÏôÄÏÑú ÌååÏùº Ï∞æÍ∏∞\n          this.loadFiles().then(() => {\n            const refreshedFileIndex = this.files.findIndex(file => file.id && file.id === data.id || file.filename === data.filename);\n            if (refreshedFileIndex !== -1) {\n              this.viewDocument(this.files[refreshedFileIndex], false);\n              this.$nextTick(() => {\n                this.showNotification(`ÌååÏùº \"${this.files[refreshedFileIndex].originalName}\"Ïù¥(Í∞Ä) Ïó¥Î†∏ÏäµÎãàÎã§.`);\n              });\n            } else {\n              this.showNotification(`ÌååÏùºÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.`);\n            }\n          });\n        }\n      });\n\n      // Ïó∞Í≤∞ Ïò§Î•ò Ïù¥Î≤§Ìä∏\n      this.socket.on('connect_error', error => {\n        console.error('Socket.IO Ïó∞Í≤∞ Ïò§Î•ò:', error);\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","io","DocumentViewer","generateUUID","replace","c","r","Math","random","v","toString","name","components","data","roomCode","$route","params","roomId","expiresIn","timerInterval","apiUrl","process","env","VUE_APP_API_URL","socketUrl","VUE_APP_SOCKET_URL","socket","selectedFile","isUploading","uploadError","uploadSuccess","files","isLoading","selectedDocument","userId","Date","now","floor","notification","show","message","timeout","created","checkRoomStatus","startExpiryTimer","loadFiles","connectSocket","beforeDestroy","clearInterval","disconnect","methods","response","get","active","navigateToHome","alert","error","console","$router","push","catch","err","setInterval","formatTime","seconds","hours","minutes","remainingSeconds","String","padStart","handleFileChange","event","target","uploadFile","formData","FormData","append","post","headers","$refs","fileInput","value","filenameMap","Map","forEach","file","has","filename","uploadedAt","set","uniqueFiles","Array","from","values","map","_uniqueKey","downloadFile","downloadUrl","id","url","method","responseType","blob","Blob","type","mimetype","window","URL","createObjectURL","link","document","createElement","href","setAttribute","originalName","body","appendChild","click","revokeObjectURL","removeChild","showNotification","viewDocument","notifyOthers","isOfficeDocument","action","openFile","closeDocumentViewer","duration","clearTimeout","setTimeout","formatFileSize","bytes","k","sizes","i","log","parseFloat","pow","toFixed","formatDate","timestamp","date","toLocaleString","on","emit","newFile","existingFileIndex","findIndex","splice","sort","a","b","fileIndex","viewCount","currentViewers","$nextTick","then","refreshedFileIndex"],"sources":["src/views/RoomView.vue"],"sourcesContent":["<template>\n  <div class=\"room\">\n    <!-- ÏïåÎ¶º ÌëúÏãú -->\n    <div v-if=\"notification.show\" class=\"notification\">\n      {{ notification.message }}\n    </div>\n    <div class=\"room-header\">\n      <h2>Î∞© ÏΩîÎìú: {{ roomCode }}</h2>\n      <div class=\"expiry-timer\" :class=\"{ 'expiry-warning': expiresIn < 600 }\">\n        ÎÇ®ÏùÄ ÏãúÍ∞Ñ: {{ formatTime(expiresIn) }}\n      </div>\n    </div>\n\n    <div class=\"room-content\" :class=\"{ 'with-document-viewer': selectedDocument }\">\n      <div class=\"left-panel\">\n        <!-- ÌååÏùº ÏóÖÎ°úÎìú ÏòÅÏó≠ -->\n        <div class=\"file-upload-section\">\n          <h3>ÌååÏùº ÏóÖÎ°úÎìú</h3>\n          <div class=\"upload-form\">\n            <input\n              type=\"file\"\n              ref=\"fileInput\"\n              @change=\"handleFileChange\"\n              class=\"file-input\"\n            />\n            <button\n              @click=\"uploadFile\"\n              :disabled=\"!selectedFile || isUploading\"\n              class=\"upload-button\"\n            >\n              {{ isUploading ? 'ÏóÖÎ°úÎìú Ï§ë...' : 'ÏóÖÎ°úÎìú' }}\n            </button>\n          </div>\n          <div v-if=\"uploadError\" class=\"error-message\">\n            {{ uploadError }}\n          </div>\n          <div v-if=\"uploadSuccess\" class=\"success-message\">\n            {{ uploadSuccess }}\n          </div>\n        </div>\n\n        <!-- ÌååÏùº Î™©Î°ù ÏòÅÏó≠ -->\n        <div class=\"file-list-section\">\n          <h3>Í≥µÏú†Îêú ÌååÏùº</h3>\n          <button @click=\"loadFiles\" class=\"refresh-button\">\n            ÏÉàÎ°úÍ≥†Ïπ®\n          </button>\n          <div v-if=\"isLoading\" class=\"loading-message\">\n            ÌååÏùº Î™©Î°ùÏùÑ Î∂àÎü¨Ïò§Îäî Ï§ë...\n          </div>\n          <div v-else-if=\"files.length === 0\" class=\"empty-message\">\n            Í≥µÏú†Îêú ÌååÏùºÏù¥ ÏóÜÏäµÎãàÎã§.\n          </div>\n          <ul v-else class=\"file-list\">\n            <li\n              v-for=\"file in files\"\n              :key=\"file._uniqueKey || generateUUID()\"\n              class=\"file-item\"\n              :class=\"{ 'is-office-document': file.isOfficeDocument, 'is-selected': selectedDocument && selectedDocument.filename === file.filename }\"\n            >\n              <div class=\"file-info\">\n                <span class=\"file-name\">{{ file.originalName }}</span>\n                <span class=\"file-size\">{{ formatFileSize(file.size) }}</span>\n                <span class=\"file-date\">{{ formatDate(file.uploadedAt) }}</span>\n                <span v-if=\"file.viewCount > 0\" class=\"view-count\">{{ file.viewCount }} Î™Ö Î≥¥Îäî Ï§ë</span>\n              </div>\n              <div class=\"file-actions\">\n                <button\n                  v-if=\"file.isOfficeDocument\"\n                  @click=\"viewDocument(file)\"\n                  class=\"view-button\"\n                >\n                  Î≥¥Í∏∞\n                </button>\n                <button @click=\"downloadFile(file)\" class=\"download-button\">\n                  Îã§Ïö¥Î°úÎìú\n                </button>\n              </div>\n            </li>\n          </ul>\n        </div>\n      </div>\n\n      <!-- Î¨∏ÏÑú Î∑∞Ïñ¥ ÏòÅÏó≠ -->\n      <div v-if=\"selectedDocument\" class=\"document-viewer-container\">\n        <div class=\"viewer-header\">\n          <h3>Î¨∏ÏÑú Î≥¥Í∏∞: {{ selectedDocument.originalName }}</h3>\n          <button @click=\"closeDocumentViewer\" class=\"close-button\">\n            Îã´Í∏∞\n          </button>\n        </div>\n        <div class=\"viewer-content\">\n          <DocumentViewer\n            :file=\"selectedDocument\"\n            :room-code=\"roomCode\"\n            :api-url=\"apiUrl\"\n            :socket=\"socket\"\n            :user-id=\"userId\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport io from 'socket.io-client'\nimport DocumentViewer from '@/components/DocumentViewer.vue'\n\n// UUID ÏÉùÏÑ± Ìï®Ïàò\nfunction generateUUID() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    const r = Math.random() * 16 | 0\n    const v = c === 'x' ? r : (r & 0x3 | 0x8)\n    return v.toString(16)\n  })\n}\n\nexport default {\n  name: 'RoomView',\n\n  components: {\n    DocumentViewer\n  },\n  data() {\n    return {\n      roomCode: this.$route.params.roomId,\n      expiresIn: 3600,\n      timerInterval: null,\n      apiUrl: process.env.VUE_APP_API_URL || 'http://localhost:3001',\n      socketUrl: process.env.VUE_APP_SOCKET_URL || 'http://localhost:3001',\n      socket: null,\n      selectedFile: null,\n      isUploading: false,\n      uploadError: '',\n      uploadSuccess: '',\n      files: [],\n      isLoading: false,\n      selectedDocument: null,\n      userId: `user_${Date.now()}_${Math.floor(Math.random() * 1000)}`, // ÏûÑÏãú ÏÇ¨Ïö©Ïûê ID\n      notification: {\n        show: false,\n        message: '',\n        timeout: null\n      }\n    }\n  },\n  async created() {\n    await this.checkRoomStatus()\n    this.startExpiryTimer()\n    this.loadFiles()\n    this.connectSocket()\n  },\n  beforeDestroy() {\n    if (this.timerInterval) {\n      clearInterval(this.timerInterval)\n    }\n\n    // Socket.IO Ïó∞Í≤∞ Ìï¥Ï†ú\n    if (this.socket) {\n      this.socket.disconnect()\n    }\n  },\n  methods: {\n    async checkRoomStatus() {\n      try {\n        const response = await axios.get(`${this.apiUrl}/api/rooms/${this.roomCode}/status`)\n        if (!response.data.active) {\n          this.navigateToHome()\n          alert('Î∞©Ïù¥ ÎßåÎ£åÎêòÏóàÏäµÎãàÎã§.')\n          return\n        }\n        this.expiresIn = response.data.expiresIn\n      } catch (error) {\n        console.error('Î∞© ÏÉÅÌÉú ÌôïÏù∏ Ïã§Ìå®:', error)\n        this.navigateToHome()\n      }\n    },\n    navigateToHome() {\n      // Ï§ëÎ≥µ Ïù¥Îèô Ïò§Î•ò Ï≤òÎ¶¨\n      this.$router.push('/').catch(err => {\n        if (err.name !== 'NavigationDuplicated') {\n          throw err\n        }\n      })\n    },\n    startExpiryTimer() {\n      this.timerInterval = setInterval(() => {\n        this.expiresIn--\n        if (this.expiresIn <= 0) {\n          clearInterval(this.timerInterval)\n          this.navigateToHome()\n          alert('Î∞©Ïù¥ ÎßåÎ£åÎêòÏóàÏäµÎãàÎã§.')\n        } else if (this.expiresIn % 60 === 0) {\n          // 1Î∂ÑÎßàÎã§ ÏÑúÎ≤ÑÏóêÏÑú Ïã§Ï†ú ÎßåÎ£å ÏãúÍ∞Ñ ÌôïÏù∏\n          this.checkRoomStatus()\n        }\n      }, 1000)\n    },\n    formatTime(seconds) {\n      const hours = Math.floor(seconds / 3600)\n      const minutes = Math.floor((seconds % 3600) / 60)\n      const remainingSeconds = seconds % 60\n\n      return `${hours}:${String(minutes).padStart(2, '0')}:${String(remainingSeconds).padStart(2, '0')}`\n    },\n\n    // ÌååÏùº ÏóÖÎ°úÎìú Í¥ÄÎ†® Î©îÏÑúÎìú\n    handleFileChange(event) {\n      this.selectedFile = event.target.files[0] || null\n      this.uploadError = ''\n      this.uploadSuccess = ''\n    },\n\n    async uploadFile() {\n      if (!this.selectedFile) {\n        this.uploadError = 'ÏóÖÎ°úÎìúÌï† ÌååÏùºÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.'\n        return\n      }\n\n      this.isUploading = true\n      this.uploadError = ''\n      this.uploadSuccess = ''\n\n      const formData = new FormData()\n      formData.append('file', this.selectedFile)\n\n      try {\n        const response = await axios.post(\n          `${this.apiUrl}/api/rooms/${this.roomCode}/files`,\n          formData,\n          {\n            headers: {\n              'Content-Type': 'multipart/form-data'\n            }\n          }\n        )\n\n        this.uploadSuccess = response.data.message || 'ÌååÏùºÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏóÖÎ°úÎìúÎêòÏóàÏäµÎãàÎã§.'\n        this.selectedFile = null\n        this.$refs.fileInput.value = ''\n\n        // ÌååÏùº Î™©Î°ù ÏÉàÎ°úÍ≥†Ïπ®\n        this.loadFiles()\n      } catch (error) {\n        console.error('ÌååÏùº ÏóÖÎ°úÎìú Ïò§Î•ò:', error)\n        this.uploadError = error.response?.data?.message || 'ÌååÏùº ÏóÖÎ°úÎìúÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.'\n      } finally {\n        this.isUploading = false\n      }\n    },\n\n    // ÌååÏùº Î™©Î°ù Í¥ÄÎ†® Î©îÏÑúÎìú\n    async loadFiles() {\n      this.isLoading = true\n\n      try {\n        const response = await axios.get(`${this.apiUrl}/api/rooms/${this.roomCode}/files`)\n        const files = response.data.files || []\n\n        // Ï§ëÎ≥µ ÌååÏùº Ï†úÍ±∞ Î∞è Í≥†Ïú† ID Ìï†Îãπ\n        const filenameMap = new Map()\n\n        // ÌååÏùºÎ™ÖÏúºÎ°ú Ï§ëÎ≥µ Ï†úÍ±∞\n        files.forEach(file => {\n          // Ïù¥ÎØ∏ ÎèôÏùºÌïú ÌååÏùºÎ™ÖÏù¥ ÏûàÎäî Í≤ΩÏö∞ Í∞ÄÏû• ÏµúÍ∑º ÌååÏùºÎ°ú ÎåÄÏ≤¥\n          if (!filenameMap.has(file.filename) || file.uploadedAt > filenameMap.get(file.filename).uploadedAt) {\n            filenameMap.set(file.filename, file)\n          }\n        })\n\n        // Ï§ëÎ≥µÏù¥ Ï†úÍ±∞Îêú ÌååÏùº Î™©Î°ù Í∞ÄÏ†∏Ïò§Í∏∞\n        const uniqueFiles = Array.from(filenameMap.values())\n\n        // Í∞Å ÌååÏùºÏóê Í≥†Ïú† ID Ìï†Îãπ (Ïù¥ÎØ∏ ÏûàÎäî Í≤ΩÏö∞ Ïú†ÏßÄ)\n        this.files = uniqueFiles.map(file => ({\n          ...file,\n          _uniqueKey: generateUUID() // Î†åÎçîÎßÅÏö© Í≥†Ïú† ÌÇ§\n        }))\n      } catch (error) {\n        console.error('ÌååÏùº Î™©Î°ù Î°úÎìú Ïò§Î•ò:', error)\n        this.files = []\n      } finally {\n        this.isLoading = false\n      }\n    },\n\n    // ÌååÏùº Îã§Ïö¥Î°úÎìú Î©îÏÑúÎìú\n    async downloadFile(file) {\n      try {\n        // Îã§Ïö¥Î°úÎìú URL ÏÉùÏÑ± (ID ÏÇ¨Ïö©)\n        const downloadUrl = `${this.apiUrl}/api/rooms/${this.roomCode}/files/download/${file.id}?download=true`\n\n        // axiosÎ•º ÏÇ¨Ïö©ÌïòÏó¨ ÌååÏùº Îã§Ïö¥Î°úÎìú\n        const response = await axios({\n          url: downloadUrl,\n          method: 'GET',\n          responseType: 'blob'\n        })\n\n        // Blob ÏÉùÏÑ±\n        const blob = new Blob([response.data], { type: file.mimetype })\n\n        // Îã§Ïö¥Î°úÎìú ÎßÅÌÅ¨ ÏÉùÏÑ±\n        const url = window.URL.createObjectURL(blob)\n        const link = document.createElement('a')\n        link.href = url\n        link.setAttribute('download', file.originalName)\n        document.body.appendChild(link)\n\n        // Îã§Ïö¥Î°úÎìú ÏãúÏûë\n        link.click()\n\n        // ÎßÅÌÅ¨ Ï†úÍ±∞\n        window.URL.revokeObjectURL(url)\n        document.body.removeChild(link)\n      } catch (error) {\n        console.error('ÌååÏùº Îã§Ïö¥Î°úÎìú Ïò§Î•ò:', error)\n        this.showNotification('ÌååÏùº Îã§Ïö¥Î°úÎìúÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.')\n      }\n    },\n\n    // Î¨∏ÏÑú Î≥¥Í∏∞ Î©îÏÑúÎìú\n    async viewDocument(file, notifyOthers = true) {\n      this.selectedDocument = file\n\n      // Îã§Î•∏ ÏÇ¨Ïö©ÏûêÏóêÍ≤å ÌååÏùº Ïó¥Í∏∞ Ïù¥Î≤§Ìä∏ Ï†ÑÌåå\n      if (notifyOthers && file.isOfficeDocument) {\n        try {\n          await axios.post(`${this.apiUrl}/api/rooms/${this.roomCode}/files/${file.id}/view`, {\n            userId: this.userId,\n            action: 'join',\n            openFile: true\n          })\n        } catch (error) {\n          console.error('ÌååÏùº Ïó¥Í∏∞ Ïù¥Î≤§Ìä∏ Ï†ÑÌåå Ïò§Î•ò:', error)\n        }\n      }\n    },\n\n    // Î¨∏ÏÑú Î∑∞Ïñ¥ Îã´Í∏∞ Î©îÏÑúÎìú\n    closeDocumentViewer() {\n      this.selectedDocument = null\n    },\n\n    // ÏïåÎ¶º ÌëúÏãú Î©îÏÑúÎìú\n    showNotification(message, duration = 3000) {\n      // Ïù¥Ï†Ñ ÌÉÄÏù¥Î®∏Í∞Ä ÏûàÎäî Í≤ΩÏö∞ Ï∑®ÏÜå\n      if (this.notification.timeout) {\n        clearTimeout(this.notification.timeout)\n      }\n\n      // ÏïåÎ¶º ÌëúÏãú\n      this.notification.message = message\n      this.notification.show = true\n\n      // ÏùºÏ†ï ÏãúÍ∞Ñ ÌõÑ ÏïåÎ¶º Ïà®Í∏∞Í∏∞\n      this.notification.timeout = setTimeout(() => {\n        this.notification.show = false\n      }, duration)\n    },\n\n    // ÌååÏùº ÌÅ¨Í∏∞ Ìè¨Îß∑ÌåÖ\n    formatFileSize(bytes) {\n      if (bytes === 0) return '0 Bytes'\n\n      const k = 1024\n      const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB']\n      const i = Math.floor(Math.log(bytes) / Math.log(k))\n\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n    },\n\n    // ÎÇ†Ïßú Ìè¨Îß∑ÌåÖ\n    formatDate(timestamp) {\n      const date = new Date(timestamp)\n      return date.toLocaleString()\n    },\n\n    // Socket.IO Ïó∞Í≤∞ Í¥ÄÎ†® Î©îÏÑúÎìú\n    connectSocket() {\n      // Socket.IO Ïó∞Í≤∞ ÏÉùÏÑ±\n      this.socket = io(this.socketUrl)\n\n      // Ïó∞Í≤∞ Ïù¥Î≤§Ìä∏\n      this.socket.on('connect', () => {\n        console.log('Socket.IO Ïó∞Í≤∞ ÏÑ±Í≥µ')\n\n        // Î∞©Ïóê Ï∞∏Ïó¨\n        this.socket.emit('joinRoom', this.roomCode)\n      })\n\n      // ÌååÏùº ÏóÖÎ°úÎìú Ïù¥Î≤§Ìä∏\n      this.socket.on('fileUploaded', (data) => {\n        console.log('ÏÉà ÌååÏùº ÏóÖÎ°úÎìú ÏïåÎ¶º ÏàòÏã†:', data)\n\n        // ÌååÏùºÏóê Í≥†Ïú† ÌÇ§ Ï∂îÍ∞Ä\n        const newFile = {\n          ...data.file,\n          _uniqueKey: generateUUID()\n        }\n\n        // ÌååÏùº Î™©Î°ùÏóê ÏÉà ÌååÏùº Ï∂îÍ∞Ä (Ï§ëÎ≥µ Î∞©ÏßÄ)\n        const existingFileIndex = this.files.findIndex(file => file.filename === newFile.filename)\n\n        if (existingFileIndex !== -1) {\n          // Í∏∞Ï°¥ ÌååÏùºÏùò Í≥†Ïú† ÌÇ§ Ïú†ÏßÄ\n          newFile._uniqueKey = this.files[existingFileIndex]._uniqueKey\n          // Í∏∞Ï°¥ ÌååÏùº ÏóÖÎç∞Ïù¥Ìä∏\n          this.files.splice(existingFileIndex, 1, newFile)\n        } else {\n          // ÏÉà ÌååÏùº Ï∂îÍ∞Ä\n          this.files.push(newFile)\n        }\n\n        // ÌååÏùº Î™©Î°ù Ï†ïÎ†¨ (ÏµúÏã† ÏóÖÎ°úÎìú Ïàú)\n        this.files.sort((a, b) => b.uploadedAt - a.uploadedAt)\n      })\n\n      // Î¨∏ÏÑú Î≥¥Í∏∞ ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏ Ïù¥Î≤§Ìä∏\n      this.socket.on('documentViewUpdate', (data) => {\n        console.log('Î¨∏ÏÑú Î≥¥Í∏∞ ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏:', data)\n\n        // ÌååÏùº Î™©Î°ùÏóêÏÑú Ìï¥Îãπ ÌååÏùº Ï∞æÍ∏∞ (ID ÏÇ¨Ïö©)\n        const fileIndex = this.files.findIndex(file =>\n          (file.id && file.id === data.id) ||\n          file.filename === data.filename\n        )\n\n        if (fileIndex !== -1) {\n          // Î≥¥Í∏∞ ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏\n          this.files[fileIndex].viewCount = data.viewCount\n          this.files[fileIndex].currentViewers = data.currentViewers\n\n          // ÌòÑÏû¨ ÏÑ†ÌÉùÎêú Î¨∏ÏÑúÏù∏ Í≤ΩÏö∞ ÏóÖÎç∞Ïù¥Ìä∏\n          if (this.selectedDocument &&\n              ((this.selectedDocument.id && this.selectedDocument.id === data.id) ||\n               this.selectedDocument.filename === data.filename)) {\n            this.selectedDocument.viewCount = data.viewCount\n            this.selectedDocument.currentViewers = data.currentViewers\n          }\n        }\n      })\n\n      // ÌååÏùº Ïó¥Í∏∞ Ïù¥Î≤§Ìä∏\n      this.socket.on('openDocument', (data) => {\n        console.log('ÌååÏùº Ïó¥Í∏∞ Ïù¥Î≤§Ìä∏ ÏàòÏã†:', data)\n\n        // ÏûêÏã†Ïù¥ Î≥¥ÎÇ∏ Ïù¥Î≤§Ìä∏Îäî Î¨¥Ïãú\n        if (data.userId === this.userId) {\n          return\n        }\n\n        // ÌååÏùº Î™©Î°ùÏóêÏÑú Ìï¥Îãπ ÌååÏùº Ï∞æÍ∏∞ (ID ÏÇ¨Ïö©)\n        const fileIndex = this.files.findIndex(file =>\n          (file.id && file.id === data.id) ||\n          file.filename === data.filename\n        )\n\n        if (fileIndex !== -1) {\n          // ÌååÏùº Ïó¥Í∏∞ (Îã§Î•∏ ÏÇ¨Ïö©ÏûêÏóêÍ≤å ÏïåÎ¶¨ÏßÄ ÏïäÏùå)\n          this.viewDocument(this.files[fileIndex], false)\n\n          // ÏïåÎ¶º ÌëúÏãú\n          this.$nextTick(() => {\n            this.showNotification(`ÌååÏùº \"${this.files[fileIndex].originalName}\"Ïù¥(Í∞Ä) Ïó¥Î†∏ÏäµÎãàÎã§.`)\n          })\n        } else if (data.originalName) {\n          // ÌååÏùº Î™©Î°ùÏùÑ Îã§Ïãú Î∂àÎü¨ÏôÄÏÑú ÌååÏùº Ï∞æÍ∏∞\n          this.loadFiles().then(() => {\n            const refreshedFileIndex = this.files.findIndex(file =>\n              (file.id && file.id === data.id) ||\n              file.filename === data.filename\n            )\n\n            if (refreshedFileIndex !== -1) {\n              this.viewDocument(this.files[refreshedFileIndex], false)\n\n              this.$nextTick(() => {\n                this.showNotification(`ÌååÏùº \"${this.files[refreshedFileIndex].originalName}\"Ïù¥(Í∞Ä) Ïó¥Î†∏ÏäµÎãàÎã§.`)\n              })\n            } else {\n              this.showNotification(`ÌååÏùºÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.`)\n            }\n          })\n        }\n      })\n\n      // Ïó∞Í≤∞ Ïò§Î•ò Ïù¥Î≤§Ìä∏\n      this.socket.on('connect_error', (error) => {\n        console.error('Socket.IO Ïó∞Í≤∞ Ïò§Î•ò:', error)\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n:root {\n  --primary-color: #3f51b5;\n  --primary-light: #757de8;\n  --primary-dark: #002984;\n  --secondary-color: #ff4081;\n  --secondary-light: #ff79b0;\n  --secondary-dark: #c60055;\n  --text-on-primary: #ffffff;\n  --text-on-secondary: #ffffff;\n  --background-color: #f5f7fa;\n  --surface-color: #ffffff;\n  --error-color: #f44336;\n  --success-color: #4caf50;\n  --warning-color: #ff9800;\n  --info-color: #2196f3;\n}\n\n.room {\n  padding: 20px;\n  background-color: var(--background-color);\n  min-height: 100vh;\n  font-family: 'Roboto', 'Noto Sans KR', sans-serif;\n}\n\n.room-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 24px;\n  background-color: var(--primary-color);\n  color: var(--text-on-primary);\n  margin-bottom: 24px;\n  border-radius: 12px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  transition: all 0.3s ease;\n}\n\n.room-header h2 {\n  margin: 0;\n  font-size: 1.5rem;\n  font-weight: 500;\n}\n\n.expiry-timer {\n  font-family: 'Roboto Mono', monospace;\n  padding: 8px 12px;\n  border-radius: 20px;\n  background-color: rgba(255, 255, 255, 0.2);\n  color: var(--text-on-primary);\n  font-weight: 500;\n  letter-spacing: 1px;\n  transition: all 0.3s ease;\n}\n\n.expiry-warning {\n  background-color: var(--error-color);\n  color: var(--text-on-secondary);\n  animation: pulse 2s infinite;\n  box-shadow: 0 0 10px rgba(244, 67, 54, 0.5);\n}\n\n.room-content {\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: 24px;\n  transition: all 0.3s ease;\n}\n\n.room-content.with-document-viewer {\n  grid-template-columns: 1fr 2fr;\n}\n\n.left-panel {\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n}\n\n.file-upload-section,\n.file-list-section {\n  background-color: var(--surface-color);\n  padding: 24px;\n  border-radius: 12px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n  transition: all 0.3s ease;\n}\n\n.file-upload-section h3,\n.file-list-section h3 {\n  margin-top: 0;\n  margin-bottom: 16px;\n  color: var(--primary-color);\n  font-size: 1.25rem;\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n}\n\n.file-upload-section h3::before,\n.file-list-section h3::before {\n  content: '';\n  display: inline-block;\n  width: 4px;\n  height: 18px;\n  background-color: var(--primary-color);\n  margin-right: 8px;\n  border-radius: 2px;\n}\n\n.upload-form {\n  display: flex;\n  margin-top: 16px;\n  margin-bottom: 16px;\n  position: relative;\n}\n\n.file-input {\n  flex: 1;\n  padding: 12px 16px;\n  border: 2px solid #e0e0e0;\n  border-radius: 8px 0 0 8px;\n  font-size: 14px;\n  transition: all 0.3s ease;\n  outline: none;\n}\n\n.file-input:focus {\n  border-color: var(--primary-color);\n  box-shadow: 0 0 0 2px rgba(63, 81, 181, 0.2);\n}\n\n.upload-button {\n  padding: 12px 20px;\n  background-color: var(--primary-color);\n  color: var(--text-on-primary);\n  border: none;\n  border-radius: 0 8px 8px 0;\n  cursor: pointer;\n  font-weight: 500;\n  letter-spacing: 0.5px;\n  transition: all 0.3s ease;\n}\n\n.upload-button:hover {\n  background-color: var(--primary-dark);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n}\n\n.upload-button:disabled {\n  background-color: #cccccc;\n  cursor: not-allowed;\n  box-shadow: none;\n}\n\n.error-message {\n  color: var(--error-color);\n  margin-top: 12px;\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n}\n\n.error-message::before {\n  content: '‚ö†Ô∏è';\n  margin-right: 6px;\n}\n\n.success-message {\n  color: var(--success-color);\n  margin-top: 12px;\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n}\n\n.success-message::before {\n  content: '‚úÖ';\n  margin-right: 6px;\n}\n\n.refresh-button {\n  padding: 8px 16px;\n  background-color: var(--info-color);\n  color: var(--text-on-primary);\n  border: none;\n  border-radius: 20px;\n  cursor: pointer;\n  margin-left: 12px;\n  font-size: 14px;\n  font-weight: 500;\n  display: inline-flex;\n  align-items: center;\n  transition: all 0.3s ease;\n}\n\n.refresh-button::before {\n  content: 'üîÑ';\n  margin-right: 6px;\n  font-size: 14px;\n}\n\n.refresh-button:hover {\n  background-color: #1976d2;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);\n}\n\n.loading-message,\n.empty-message {\n  margin-top: 16px;\n  color: #757575;\n  font-style: italic;\n  text-align: center;\n  padding: 24px;\n  background-color: #f5f5f5;\n  border-radius: 8px;\n}\n\n.loading-message::before {\n  content: '‚è≥';\n  margin-right: 8px;\n}\n\n.empty-message::before {\n  content: 'üìÇ';\n  margin-right: 8px;\n}\n\n.file-list {\n  list-style: none;\n  padding: 0;\n  margin-top: 16px;\n}\n\n.file-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px;\n  border: 1px solid #e0e0e0;\n  border-radius: 8px;\n  margin-bottom: 12px;\n  background-color: white;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n}\n\n.file-item:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n}\n\n.file-item.is-office-document {\n  border-left: 4px solid var(--primary-color);\n}\n\n.file-item.is-selected {\n  background-color: #e8eaf6;\n  border-color: var(--primary-color);\n}\n\n.file-info {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n}\n\n.file-name {\n  font-weight: 500;\n  margin-bottom: 8px;\n  color: #333;\n  font-size: 16px;\n  word-break: break-all;\n}\n\n.file-size,\n.file-date {\n  font-size: 13px;\n  color: #757575;\n  margin-bottom: 4px;\n  display: flex;\n  align-items: center;\n}\n\n.file-size::before {\n  content: 'üìä';\n  margin-right: 6px;\n  font-size: 12px;\n}\n\n.file-date::before {\n  content: 'üïí';\n  margin-right: 6px;\n  font-size: 12px;\n}\n\n.view-count {\n  font-size: 13px;\n  color: var(--primary-color);\n  background-color: #e8eaf6;\n  padding: 4px 10px;\n  border-radius: 16px;\n  display: inline-flex;\n  align-items: center;\n  margin-top: 8px;\n  font-weight: 500;\n}\n\n.view-count::before {\n  content: 'üëÅÔ∏è';\n  margin-right: 6px;\n  font-size: 12px;\n}\n\n.file-actions {\n  display: flex;\n  gap: 10px;\n}\n\n.download-button,\n.view-button {\n  padding: 8px 16px;\n  border: none;\n  border-radius: 20px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  display: inline-flex;\n  align-items: center;\n  transition: all 0.3s ease;\n}\n\n.download-button {\n  background-color: var(--info-color);\n  color: var(--text-on-primary);\n}\n\n.download-button::before {\n  content: '‚¨áÔ∏è';\n  margin-right: 6px;\n  font-size: 14px;\n}\n\n.download-button:hover {\n  background-color: #1976d2;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);\n}\n\n.view-button {\n  background-color: var(--success-color);\n  color: var(--text-on-primary);\n}\n\n.view-button::before {\n  content: 'üëÅÔ∏è';\n  margin-right: 6px;\n  font-size: 14px;\n}\n\n.view-button:hover {\n  background-color: #388e3c;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);\n}\n\n.document-viewer-container {\n  background-color: var(--surface-color);\n  border-radius: 12px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n  display: flex;\n  flex-direction: column;\n  height: 650px;\n  overflow: hidden;\n  transition: all 0.3s ease;\n}\n\n.viewer-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 20px;\n  background-color: var(--primary-color);\n  color: var(--text-on-primary);\n  border-radius: 12px 12px 0 0;\n}\n\n.viewer-header h3 {\n  margin: 0;\n  font-size: 18px;\n  font-weight: 500;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.close-button {\n  padding: 8px 16px;\n  background-color: rgba(255, 255, 255, 0.2);\n  color: var(--text-on-primary);\n  border: none;\n  border-radius: 20px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  display: inline-flex;\n  align-items: center;\n  transition: all 0.3s ease;\n}\n\n.close-button::before {\n  content: '‚úñÔ∏è';\n  margin-right: 6px;\n  font-size: 14px;\n}\n\n.close-button:hover {\n  background-color: rgba(255, 255, 255, 0.3);\n}\n\n.viewer-content {\n  flex: 1;\n  overflow: hidden;\n  position: relative;\n  background-color: #f5f5f5;\n}\n\n@keyframes pulse {\n  0% { opacity: 1; }\n  50% { opacity: 0.5; }\n  100% { opacity: 1; }\n}\n\n.notification {\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  background-color: var(--success-color);\n  color: white;\n  padding: 16px 24px;\n  border-radius: 12px;\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);\n  z-index: 1000;\n  animation: slideIn 0.3s ease-out, fadeOut 0.5s ease-in 2.5s forwards;\n  display: flex;\n  align-items: center;\n  font-weight: 500;\n  max-width: 80%;\n}\n\n.notification::before {\n  content: 'üì¢';\n  margin-right: 10px;\n  font-size: 18px;\n}\n\n@keyframes slideIn {\n  from { transform: translateX(100%); opacity: 0; }\n  to { transform: translateX(0); opacity: 1; }\n}\n\n@keyframes fadeOut {\n  from { opacity: 1; }\n  to { opacity: 0; }\n}\n\n/* Î∞òÏùëÌòï ÎîîÏûêÏù∏ */\n@media (max-width: 1200px) {\n  .room-content.with-document-viewer {\n    grid-template-columns: 1fr 1.5fr;\n  }\n}\n\n@media (max-width: 992px) {\n  .room-content.with-document-viewer {\n    grid-template-columns: 1fr;\n  }\n\n  .document-viewer-container {\n    height: 500px;\n    order: -1;\n  }\n\n  .room-header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n\n  .expiry-timer {\n    align-self: flex-start;\n  }\n\n  .file-actions {\n    flex-direction: column;\n    gap: 8px;\n  }\n\n  .download-button, .view-button {\n    width: 100%;\n    justify-content: center;\n  }\n}\n\n@media (max-width: 576px) {\n  .room {\n    padding: 12px;\n  }\n\n  .room-header {\n    padding: 12px 16px;\n    margin-bottom: 16px;\n  }\n\n  .file-upload-section, .file-list-section {\n    padding: 16px;\n  }\n\n  .upload-form {\n    flex-direction: column;\n  }\n\n  .file-input {\n    border-radius: 8px 8px 0 0;\n  }\n\n  .upload-button {\n    border-radius: 0 0 8px 8px;\n  }\n\n  .file-item {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n\n  .file-info {\n    width: 100%;\n    margin-bottom: 12px;\n  }\n\n  .file-actions {\n    width: 100%;\n  }\n\n  .notification {\n    top: 10px;\n    right: 10px;\n    left: 10px;\n    max-width: calc(100% - 20px);\n    padding: 12px 16px;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}